% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calc_occupancies.R
\name{prepare_p_list}
\alias{prepare_p_list}
\title{Prepare transition probability list for occupancy calculations}
\usage{
prepare_p_list(
  transitions,
  age_col = "age",
  trans_col = "from_to",
  p_col = "p",
  delim = NULL
)
}
\arguments{
\item{transitions}{Either:
\itemize{
\item A tidy data frame with columns \code{age}, \code{from_to}, and \code{p},
\item A wide data frame with \code{age} and one column per transition (e.g. "PW", "WD"),
\item Or a named list of transition vectors, with names of the form "from_to".
}}

\item{age_col}{The name of the age column (default is \code{"age"}).}

\item{trans_col}{The name of the column containing information of origin-destination pairs for transitions. Default \code{"from_to"}.}

\item{p_col}{The name of the column containing transition probabilities. Default \code{"p"}.}

\item{delim}{Character string used to split transition names into origin and destination states. Default is \code{"->"}, but use \code{""} if transitions are compact like \code{"PW"} or \code{"UD"}.}
}
\value{
A list with two elements:
\itemize{
\item \code{p_list}: A named list of transition probabilities with all required transitions included.
\item \code{age}: A numeric vector of ages, extracted from input data if applicable.
}
}
\description{
Prepares a list of transition probability vectors (\code{p_list}) suitable for input to
multistate occupancy functions. Accepts tidy long-format data, wide-format data,
or a named list. Automatically fills in missing transitions and infers self-transitions.
}
\examples{
data(transitions_example)

# From tidy input
prep <- prepare_p_list(transitions_example, delim = "")

# From wide data frame
wide <- tidyr::pivot_wider(transitions_example,
 names_from = from_to,
 values_from = p)
prep2 <- prepare_p_list(wide, delim = "")

# From list input
age <- wide$age
p_list <- as.list(wide[, -1])
prep3 <- prepare_p_list(p_list, delim = "")

}
